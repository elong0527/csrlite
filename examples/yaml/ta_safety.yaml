# Therapeutic Area: Safety Tables
therapeutic_area:
  name: "safety"
  description: "Safety analysis templates for adverse events"
inherits_from: "org_common"

# TA-specific populations (inherit common ones and add new)
populations:
  safety_evaluable:
    name: "SAFEVAL"
    label: "Safety Evaluable Population"
    filter: "SAFFL == 'Y' AND DTHFL != 'Y'"

  safety_modified:
    name: "MSAFFL"
    label: "Modified Safety Population"
    filter: "SAFFL == 'Y' AND TRTSDT IS NOT NULL"

# TA-specific parameters for adverse events
parameters:
  adverse_events:
    any_ae: &any_ae
      name: "AECAT"
      label: "Any Adverse Event"
      filter: "TRTEMFL == 'Y'"

    serious_ae: &ser_ae
      name: "AESER"
      label: "Serious Adverse Event"
      filter: "AESER == 'Y' AND TRTEMFL == 'Y'"

    related_ae: &rel_ae
      name: "AEREL"
      label: "Treatment Related AE"
      filter: "AEREL IN ('POSSIBLE', 'PROBABLE', 'DEFINITE') AND TRTEMFL == 'Y'"

    severe_ae: &sev_ae
      name: "AESEV"
      label: "Severe Adverse Event"
      filter: "AESEV == 'SEVERE' AND TRTEMFL == 'Y'"

    drug_related_ae: &drug_rel_ae
      name: "AEREL_DRUG"
      label: "Drug Related AE"
      filter: "AEREL IN ('PROBABLE', 'DEFINITE') AND TRTEMFL == 'Y'"

# TA-specific TLF templates that can be inherited by studies
tlf_templates:
  ae_summary_table: &ae_summary_template
    type: "table"
    category: "safety"
    data_source: "adae"
    population: "safety"
    group_by: ["TRTA"]
    summary_vars: ["any_ae", "ser_ae", "rel_ae"]
    output:
      engine: "rtflite"
      orientation: "landscape"
      font_size: 9

  ae_listing_template: &ae_listing_template
    type: "listing"
    category: "safety"
    data_source: "adae"
    population: "safety"
    sort_by: ["USUBJID", "AESTDTC"]
    columns:
      - {name: "Subject", variable: "USUBJID"}
      - {name: "Treatment", variable: "TRTA"}
      - {name: "System Organ Class", variable: "AESOC"}
      - {name: "Preferred Term", variable: "AEDECOD"}
      - {name: "Start Date", variable: "AESTDTC"}
      - {name: "End Date", variable: "AEENDTC"}
      - {name: "Severity", variable: "AESEV"}
      - {name: "Relationship", variable: "AEREL"}