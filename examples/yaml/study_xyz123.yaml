# Study-specific configuration
study:
  name: "XYZ123"
  title: "Phase III Study of Drug X vs Placebo"
  protocol: "XYZ123-301"
  indication: "Hypertension"
inherits_from: "ta_safety"

# Study-specific data sources
data_sources:
  adsl:
    name: "adsl"
    path: "data/adam_validate/adsl.parquet"
    source: "ADSL"

  adae:
    name: "adae"
    path: "data/adam_validate/adae.parquet"
    source: "ADAE"

  advs:
    name: "advs"
    path: "data/adam_validate/advs.parquet"
    source: "ADVS"

# Study-specific treatments
treatments:
  control: &control
    name: "Placebo"
    variable: "TRTA"
    filter: "TRTA == 'Placebo'"

  active_low: &active_low
    name: "Drug X 5mg"
    variable: "TRTA"
    filter: "TRTA == 'Xanomeline Low Dose'"

  active_high: &active_high
    name: "Drug X 10mg"
    variable: "TRTA"
    filter: "TRTA == 'Xanomeline High Dose'"

# Study-specific populations (inherit from TA and add study-specific ones)
populations:
  modified_itt:
    name: "mITT"
    label: "Modified Intent-to-Treat"
    filter: "ITTFL == 'Y' AND RANDFL == 'Y' AND TRTSDT IS NOT NULL"

  completers:
    name: "COMPLFL"
    label: "Study Completers"
    filter: "COMPLFL == 'Y'"

# Study-specific TLF specifications
tlfs:
  # Adverse Event Summary Table
  ae_summary_by_treatment:
    type: "table"
    title: "Summary of Adverse Events by Treatment Group"
    subtitle: "Safety Population"
    data_source: "adae"
    population: "safety"
    group_by: ["TRTA"]
    summary_vars: ["any_ae", "ser_ae", "rel_ae", "sev_ae"]
    footnotes:
      - "AE = Adverse Event"
      - "Serious AE defined per ICH E2A guidelines"
      - "Related = Possibly, Probably, or Definitely related to study drug"
    columns:
      - name: "System Organ Class"
        variable: "AESOC"
      - name: "Preferred Term"
        variable: "AEDECOD"
    treatments: [*control, *active_low, *active_high]
    output:
      filename: "t_ae_summary_by_trt.rtf"
      title_page: true
      orientation: "landscape"
      font_size: 9

  # Serious Adverse Events Listing
  ae_listing_serious:
    type: "listing"
    title: "Listing of Serious Adverse Events"
    subtitle: "Safety Population"
    data_source: "adae"
    population: "safety"
    filter: "AESER == 'Y'"
    sort_by: ["USUBJID", "AESTDTC"]
    columns:
      - {name: "Subject", variable: "USUBJID", width: 12}
      - {name: "Treatment", variable: "TRTA", width: 20}
      - {name: "System Organ Class", variable: "AESOC", width: 25}
      - {name: "Preferred Term", variable: "AEDECOD", width: 25}
      - {name: "Start Date", variable: "AESTDTC", width: 12}
      - {name: "End Date", variable: "AEENDTC", width: 12}
      - {name: "Severity", variable: "AESEV", width: 10}
      - {name: "Relationship", variable: "AEREL", width: 15}
    output:
      filename: "l_ae_serious.rtf"
      title_page: true
      orientation: "landscape"
      font_size: 8

  # Treatment-Related AE Summary
  ae_summary_related:
    type: "table"
    title: "Summary of Treatment-Related Adverse Events"
    subtitle: "Safety Population"
    data_source: "adae"
    population: "safety"
    group_by: ["TRTA"]
    summary_vars: ["rel_ae", "drug_rel_ae"]
    footnotes:
      - "Related = Possibly, Probably, or Definitely related to study drug"
      - "Drug-Related = Probably or Definitely related to study drug"
    columns:
      - name: "System Organ Class"
        variable: "AESOC"
      - name: "Preferred Term"
        variable: "AEDECOD"
    treatments: [*control, *active_low, *active_high]
    output:
      filename: "t_ae_related_summary.rtf"
      title_page: true
      orientation: "landscape"
      font_size: 9

  # Demographics Summary Table
  demographics_summary:
    type: "table"
    title: "Subject Demographics and Baseline Characteristics"
    subtitle: "Safety Population"
    data_source: "adsl"
    population: "safety"
    group_by: ["TRTA"]
    summary_vars: ["AGE", "SEX", "RACE", "ETHNIC"]
    columns:
      - name: "Characteristic"
        variable: "PARAM"
    treatments: [*control, *active_low, *active_high]
    output:
      filename: "t_demographics.rtf"
      title_page: true
      orientation: "landscape"
      font_size: 9